---
- name: nfs
  mount: 
    path: /opt/kube-configs
    src: 172.16.0.1:/mnt/nfs
    fstype: nfs
    opts: rw,user
    state: mounted
- name: swap
  shell: swapoff -a
- name: docker
  systemd:
    name: docker
    state: started
    enabled: yes
- name: hold_pkg
  shell: apt-mark hold kubelet kubeadm kubectl
- name: hold_pkg
  systemd:
    name: kubelet
    state: started
    enabled: yes
- name: flannel
  shell: kubectl apply -f /opt/kube-configs/flannel.yaml
